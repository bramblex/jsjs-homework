# 作业 5* —— 为我们的虚拟机实现线程、协程实现

> 注：这个作业是一个选做作业，不做硬性要求，有兴趣的同学可以尝试一下~

## 作业要求：

1. 为作业 4 的虚拟机实现的虚拟机增加线程功能：
   1. 为作业 4 虚拟机增加两个新指令：`thread` / `join` 实现线程的创建和等待
   2. 每条线程执行 30ms 后切换
2. 为作业 4 的虚拟机实现协程，并且为作业 4 的编译器实现 generator 和 async await 支持
   1. 为虚拟机实现 `await` 指令，遇到 `await` 时创建协程并切换任务



| 指令名 | 操作数 | 描述                                                         |
| ------ | ------ | ------------------------------------------------------------ |
| thread | 1, [r] | 例：`thread r0` ，以 `r0` 寄存器的值 函数创建一个线程，并将线程 id 存入 `r0` 寄存器 |
| join   | 1, [r] | 例：`join r0` ，以 `r0` 寄存器的值为线程 id，等待线程结束后继续执行 |
| await  | 0      | 例：`await` 创建协程并挂起                                   |